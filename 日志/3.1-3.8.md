<!--
 * @Author: Runze Yuan 1959180242@qq.com
 * @Date: 2023-03-04 10:43:25
 * @LastEditors: Runze Yuan 1959180242@qq.com
 * @LastEditTime: 2023-03-08 15:25:46
 * @FilePath: \Dissertation2022\日志\3.1-3.8.md
 * @Description: 
 * 
 * Copyright (c) 2023 by ${git_name_email}, All Rights Reserved. 
-->
## 第4周

### 发生的事情

### 待办事项

进行大量阅读，做好写RRTM的准备

### 计划

读！

上周的会议记录：

> 找论文不用非得找一个完全一致的，只要能帮到你更深入地理解此方向就可以。
>
> 对于RRTM，确实，有点偏，你多找找其他的关键词。
> 
> allocation是另一个好的关键词。distributed control, space partitioning, how people handle the need to share space
> 交通方面？
> 
> 我还是得广找找。
> 
> STDMA是个关于distributed resource sharing。有没有其他的此类方法。很多都还是中心化的控制。
> 
> https://ieeexplore.ieee.org/abstract/document/5230846
> 
> https://core.ac.uk/download/pdf/157816762.pdf
> 
> 还是得看看，不要做到最后才发现有人做过。

### 问题

萌生出了一个点子：动态帧长度的想法。
和之前的点子：如何在这个STDMA的框架下实现优先级的问题。

   读了他给我的两篇论文  

   发现很多我设想的问题都被他解答过，感觉越看越觉得自己得看。还在学习。我现在觉得我说的那个优先级和蜂群交互的点子还可以。先看吧。问问他的意见。  

   我有一个不同的设想：就是那个关于物理层和通信层两层的设想  
   
   下周我要带着一个目的来，然后再下周就带着research proposal的初稿来（尽量）



### 会议记录

两层这种思想还挺有意思的

对于分配资源的那一层，有一点问题：如果是在现实世界中，**不会有重复循环的东西存在。**

不一定会要现在确定题目，只画饼也可以非常确切。“我要让无人机穿过某个门之类的东西，我要干什么。”

现在不用确定题目！太好了。九月份也不会见检查你的题目和proposal一不一致。

我说了下周我会有一个确切的目的，然后再下周会有一个大概的草稿，我觉得我要没时间了。

他说信息收发会

### 流水账

**3.4** 周六

计划周末两天用在阅读上。

先看看allocation这个关键词的结果。

重要概念：帕累托最优

Distributed resource allocation schemes中提到了一种分布式定价算法：Asynchronous Distributed Pricing（ADP）,核心思想就是各机仍然只优化自己的代价，但是这个代价和之前的不一样，这个代价是考虑到全局总效能的代价。所以就能将统筹和本地计算联系到一起。

他的简单例子就是各agent把自己功能受干扰值影响的导数公开，然后大家算自己的收益的时候要用自己制造的干扰算出对别人的影响，从收益里减去这部分。

关键词：纳什均衡，帕累托最优，[KKT条件](https://zhuanlan.zhihu.com/p/38163970)


再看老师给的[第二篇论文](https://www.sciencedirect.com/science/article/pii/S0005109818301377)。

第二篇是他自己的。乐。

这是一篇讲受限系统的模型预测控制（MPC）的文章。文中采用串行的DMPC（分散式MPC）。

他说自己的灵感来自[MAC](https://www.sciencedirect.com/topics/engineering/multiple-access-channel)。回来记得看看

今天的效率实在是一般，明天继续！

他妈的，厨房请上客了，再他妈学一会，等吧！

他的文章是描述了一种策略，允许不同子系统动态地加入和离开。
针对已有的串行优化策略（不允许大家一起优化，一次来一位进行自己的优化），他加入了STDMA使其变得可缩放。

**3.5**

接着看老师的论文

他说串行的DMPC已经有人做过，但是都是基于一个假设：各个agent已经有了商量好的顺序。他要做的就是排序这回事。

看到了讲STDMA论文的引用 https://ieeexplore.ieee.org/abstract/document/6737593
晚些时候去读一下

第二节讲怎么让系统中的非活动单元变成活动单元，就是我以前想的那个事。

他先讲了怎么让非活动系统进入活动中：非活动单元监听，然后选一个没人用的时间点。唯一的问题是两个非活动节点碰撞的情况，他上了一个随机退避（back-off）时间来避免死锁。
![](https://ars.els-cdn.com/content/image/1-s2.0-S0005109818301377-fx1.jpg)
$p_k$是指某个单元的slot，然后$L_f$是一个帧中slot的总数。

离开合作是通过停止传输来实现的，向其他人表明该插槽再次可用。因此，与通信情况下槽位分配的有限寿命不同，一个槽位无限期地属于一个子系统，直到该子系统放弃它。与进入和离开相关的控制约束将在第4节中描述。

此解法的假设：
> 帧长度问题：
   所有agent都知道帧长度，这也是agent的界面的关键：要想scalable，所有agent的界面必须是统一的
   - 备注1：不必为所有agent定义一个公用的帧相位（phasing of frames,没看懂，啥玩意儿？），因为帧是周期性的
   - 备注2；由于一帧就$L_f$个slot，所以帧长也代表了系统的承受能力上限。帧长度设计的问题本篇放不下了，看[这个](https://www.sciencedirect.com/science/article/pii/S2405896315023198)吧。

控制问题的具体定义：

每个子系统都有其动态：
下一时刻状态 = f(当前时刻状态，控制输入)
 - 备注3：此模型忽略了扰动——[不是处理不了](https://www.sciencedirect.com/science/article/pii/S2405896315023198)，但是这里就略过了。

他把总资源归一化，每人占有一定百分比的资源。难怪他一直引导我去向单个资源的分享的方向做第一步。

他也举了我想的把世界分割成网格的例子：空中交通问题。
Example 2 Air Traffic

Consider a set of aircraft flying at the same altitude within an airspace sector 
. Whilst inside the sector, aircraft are required to maintain a minimum separation 
 (Other sector controllers, not considered here, provide separation outside 
). Each point in the airspace is considered a shared resource, and separation is assured if no more than one aircraft comes within 
 of each point. Hence the resource set 
 and the coordinating output is
where 
 represents the position of aircraft 
. Safe mode is equivalent to 
. For a fixed-wing aircraft, circling flight at safe separation from all occupied air space provides a suitable invariant set 
 [(Kuwata, Richards, Schouwenaars, & How, 2007b).](https://ieeexplore.ieee.org/abstract/document/1656521?casa_token=_ft-rydfvTEAAAAA:qv5SNoxDfDFlMXi1mq8YKqAZeMxwUBlMag9Ug8hssiWsBPRPUxSThmdfPLbwBpdWsbxG4XgAevM)

读完了，但是当中algorithm2没有完全吃透。总之是知道有这么回事。

读[STDMA](https://ieeexplore.ieee.org/abstract/document/6737593)吧

摘要里提到了和CSMA（载波监听多路访问）的对比。


CSMA：先听后说。节点侦听信道是否正有人使用。如果信道当前繁忙，则进行一个随机时长的退避。



先吃了，今天先到这里


**3.7**

今天的任务有两件：继续读东西，并且从实用角度出发进行总结，提出一些功能上暂时没有解决的问题，如优先度这种。

如果用一个单独的装置接入网络占一个位置，然后允许这个装置修改计划的一些东西，那就实现与**蜂群的交互**了吧！

先接着读STDMA


时长（timeout）：所使用的slot时长
偏移（offset）：我两次slot之间的时间差

STDMA数据包必须包含：时长，偏移，发送方的地理位置

新加入网络的站点要依次经历以下四个阶段：

1. 初始化阶段
   站点监听，以获得当前的slot分配信息。
   slot可以有以下四种状态：
   1. 内部分配：此slot已经被分配给自己（就归自己了，所以叫内部分配）。只要这种slot的时长大于0，此种slot的状态就会被维持。
   2. 外部分配： 观察到某一slot已被分配。这种知识有两种来源：
      1. 观察到某一slot被人使用
      2. 某一slot中宣布另一slot归谁
      只要此种slot的时长大于0，它的状态就会被维持。
   3. 忙  
      两种情况下，一个slot会被认证为忙：
      1. 在前一帧的这个slot中发现了有一个包，但没能成功解码
      2. 前一帧中这个slot的时候，接收端的平均能量水平高于清晰信道评估（CCA）阈值。
      忙态持续到下一帧结束为止。
   4. 自由  
      要满足三个条件，才认为一个slot是自由的：
      1. 过去没有证据表明这个slot会在未来被谁使用
      2. 此slot中没有检测到前导信息（preamble）
      3. 此slot中的平均能量水平高于清晰信道评估（CCA）阈值
   听了一帧之后，应当对当前的slot分配信息有了很好的了解。  
   监测从不暂停，为了保持站点的信息最新。  
   更新的三条原则：
   1. 只有当新状态比旧状态优先级更高时，才能覆盖前一帧中观测到的状态
   2. 如果一个slot被标记为外部分配，则使用新旧时长值中的最大值
   3. 外部分配->自由态的转换：只有保留期限已过，或者此slot连续三次被检测到是free的。
2. 网络进入阶段
   此阶段在初始化阶段结束后直接开始。在广播自己的存在（广播网络进入数据包完毕）后结束。  
   广播这个包的时机（用哪个slot？）是基于RATDMA（随机接入时分多重访问）协议。如下：  
   1. 为潜在的传输选择一个区间（SI selected interval），让它覆盖接下来的i个传输slot
   2. 通过包含SI中的所有自由slot，创建一个可能的传输slot列表
   3. 在每个可能传输的slot开始时，随机决定是否要使用它。
   实际上RATDMA用的是某种P坚持（p-presistance）机制，来决定在哪个slot中进行传输。
   网络入口数据包时一次性的传输，其内容为其所宣布占用的slot距离此帧开始的偏移量
3. 第一帧阶段
   只要一个站宣布了其存在，就进入了第一帧阶段。此阶段的任务是宣布和保留额外的slot，来达到报告速率的要求。  
   假设一帧有N个slot，此站的目标是每帧传输r个数据包，那工作以以下顺序展开：
   1. 计算帧长度和每帧要传输的数据包的数目的比例NI
   2. 从一帧的第一NI个slot里随机选一个NSS
   3. 后面每个NI长度的slot里都这么选NSS
   4. 具体的规则：对于每个NI：
      1. 在NSS左右加上一丢丢
      2. 在加完一丢丢的这个区间里选出备选slots
      3. 随机选一个slot用来传输
   在宣布所选slot的分配时，会从预定义的最大最小时长限制之间随机抽一个，所以每个slot的时长是不一样的。
4. 连续阶段
   1. 在此期间，只要slot的时长过期，就要重新分配，分配规则与第一帧阶段相同
   2. 但是，如果没有可用的候选slot，那就允许站点坚持当前slot


候选slot集合的编译问题
   这个问题贯穿了slot的保留和再保留问题的始终。
   它必须遵循以下原则：
   1. 总得有至少C个备选slot，除非缺乏位置信息（如，繁忙slot太多了）
   2. 备选slot主要从自由slot中选出
   3. 如果不足C个备选slot，那外部分配的slot也纳入可选
   4. 外部分配slot之间也有优先级，先用离本站远的站用的slot
   5. 只有当本地站没有在用外部分配的slot时，才允许站点用外部分配的slot
   6. 所有备选slot被选到的几率是等同的，与它们的状态无关
   7. 要是还是不够C个，那就算了，不够就不够吧，愣选！
   8. 如果找不到备选slot，那站点就不该在SI中保留位置。不过这种情况不太可能发生（所有slot都无法解码）

协议的分析
   主要分析冲突的问题：哪些情形会导致两站同时传输，这种冲突会怎么影响协议的协调效率。  
   对于问题1：
      1. 多个站点同时选择同一个slot进行网络进入阶段
         没辙！传统的网络没办法解决这个，因为站点不可能边听边说。
      2. 新站入网的时候所有的slot都被使用，那只能复用离他最远的站点正在用的slot
      3. 重新保留slot时为了补满最小候选slot数，填了外部分配的slot进去当备选，结果还真给选上了
   
行了，读完了，一会吃完饭整理明天组会要问的话。这次最好显得正常一点。
说下次组会自己会带着目标来，然后就狂写research proposal


本周实际干的事情：  
   读了他给我的两篇论文  

   发现很多我设想的问题都被他解答过，感觉越看越觉得自己得看。还在学习。我现在觉得我说的那个优先级和蜂群交互的点子还可以。先看吧。问问他的意见。  

   我有一个不同的设想：就是那个关于物理层和通信层两层的设想  
   
   下周我要带着一个目的来，然后再下周就带着research proposal的初稿来（尽量）

